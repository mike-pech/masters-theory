# Контейнеризация

Контейнерезация — это более легковесная версия виртуализации, которая не тащит за собой оверхэд виртуальной машины — гипервизор и тяжёлые инсталяции ОС — за счёт чего разворачивается быстрее и проще 

По большей части я писал об этом в своих девопсерских медитациях, но контейнеры — это просто процессы, которые изолированы по неймспейсам в линуксе
## Пространства памяти (namespaces)

Своего рода изолированый контейнер, который не пропускает <процессы, время, ФС, сеть и пр.> изнутри контейнера во вне — снаружи видно, что в неймспейсе, изнутри — нет
# Кубер

Позволяет запускать контейнеры (или поды — группы контейнеров) на нескольких нодах по заранее описанной конфигурации и поддерживать её состяния
### Malutka starter Pack

Для начала можно использовать `minikube` — учебную маленькую версию кластера куба

Настраивается в YAML-файле `~/.kube/config` — как и обычный кубер
## Базовая структура

![[Pasted image 20251115092311.png]]
Структура кубера

- API — главный компонент, через который общаются бинари и который перенаправляет их запросы
- `etcd` — key-value База данных, которая хранит состояние кластера
- `c-m` — controller manager 
- Планировщик 
- Kubelet — непосредственный воркер, который оркестрирует контейнеры на конкретной ноде
- k-proxy 

Кубер не управляет контейнерами напрямую — он управляет подами (с англ. стручками) — группами контейнеров, состоящими из одного главенствующего и (опционально) вспомогательных контейнеров
## Деплой
### Примитивы деплоя
#### Replica Set

Самый распространённый примитив для Stateless приложений — часто для REST API — имеет и поддерживает n реплик
#### Stateful Set

Для приложений с состоянием — Баз данных (да, в кубере это норм лол) — автоматически не масштабируется, но гарантирует, что подов будет n заранее заданное количество с n постоянных хранилищ
#### Daemon Set

Для служебных приложений — по одной реплике на ноде 