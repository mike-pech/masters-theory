Казалось бы — приняли сигнал на физическом уровне, пусть и с его ограничениями и особенностями — зачем ещё один уровень?

> [!INFO] Каждый новый уровень OSI даёт новый набор интерфейсов и абстракций

Физический уровень даёт лишь возможность передачи сигнала.

Следующий уровень — канальный — даёт возможность проверять и отлавливать ошибки приёма сигнала. Если пользователей много, то приёмник может не справляться с нагрузкой и пропускать байты в сети.

Канальный уровень работает с фреймами (кадрами) — условными группами передаваемых байтов.
## Как делить байты на фреймы?

Фрейм это:
- Заголовок (Header)
- Груз (Payload)
- Конец (Trailer)

![[Pasted image 20250920115942.png]]
#### Наивный подход — подсчёт байтов
Просто считываем количество байтов в заголовке фрейма и считаем это количество полученных байтов

Не работает, если заголовок считан неправильно или не считан совсем
#### Байт-стаффинг
«Впихиваем» все байты пакета между разделителями — служебными байтами с возможностью экранирования подобно `\`
#### Битовый флаг с байт-стаффингом
Аналогично байт-стаффингу ставим служебные биты, обозначающие конец фрейма — более компактный метод

> [!INFO] Зачастую применяется несколько разных способов обработки фреймов
## Обработка ошибок

![[Pasted image 20250920122245.png]]

Простой метод: использовать таймер (дедлайн) пересылки пакетов — пакет недосланный до времени отбрасывается как некорректный.

![[Pasted image 20250920090732.png]]

![[Pasted image 20250920091034.png]]
Более формализованное [условие Фано](https://ru.wikipedia.org/wiki/%D0%A3%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D0%B5_%D0%A4%D0%B0%D0%BD%D0%BE#:~:text=%D0%9E%D0%B1%D1%8B%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0%20%D1%8D%D1%82%D0%BE%D0%B3%D0%BE%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B2%D1%8B%D0%B3%D0%BB%D1%8F%D0%B4%D0%B8%D1%82,ab%20%D0%B2%20%D0%BA%D0%BE%D0%B4%D0%B5%20%D0%BD%D0%B5%20%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D1%83%D0%B5%D1%82.). В кодировании 4B/5B (и далее в кодировании 8B/10B) все коды, ранее не согласованные между двумя сторонами считаются ошибочными, так как их не мог модулировать передатчик имеющий строго определённую таблицу модуляции — значит, это ошибка в передаче битов.

![[Pasted image 20250920091212.png]]

Альтернативный метод — корректировка ошибок вместо отбрасывания

![[Pasted image 20250920091337.png]]
![[Pasted image 20250920091342.png]]

![[Pasted image 20250920091537.png]]

![[Pasted image 20250920092809.png]]