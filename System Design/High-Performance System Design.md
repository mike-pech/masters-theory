### Три главных нефункциональных требования
![[Pasted image 20250916082302.png]]
- Производительность — большая пропускная способность и низкая задержка
- Масштабируемость — как система будет справляться с повышенной нагрузкой
- Доступность — устойчивость системы к сбоям и ошибкам

Все эти принципы конфликтуют друг с другом, поэтому компромиссы необходимы.
### Производительность

Разделена на два термина:
- Количество операций за \[минуту/секунду]
- Задержка между запросом данных клиентом и получением им ответа
##### Факторы задержки
- Накладные расходы при перемещении данных между ЦОДами — Propagation Delay — часто очень мал, но в некоторых задачах (трейдинг) критичны
- Работа сервера
- Сетевая перегрузка — задержки при проходе сигнала через коммутаторы. Часть этого фактора можно исправить путём расположения нод в одном ЦОДе, чтобы не допускать лишней задержки между своими датацентрами. На задержки при внешней сетевой перегрузке никак не повлиять.
##### Факторы количества операций
Основной — узкие горлышки (bottlenecks) — места, где запросы не могут работать параллельно и встают в «пробку»
##### Конфликт производительности

Low latency system VS High throughput system

Обрабатывать запросы как можно быстрее (минимальный пинг) или обрабатывать кучу данных за раз (обработка больших батчей) 

![[Pasted image 20250916083727.png]]
### Масштабируемость

Есть три основных механики:
- Линейное масштабирование — идеалистичная модель — с ростом нагрузки одинаково растёт вычислительная мощность системы.
- Под-линейное — не по экспоненте — нагрузка растёт быстрее, чем вычислительные мощности, как в жизни
- Негативное — при неправильной конфигурации системы повышение нагрузки влечёт снижение производительности ввиду накладных расходов

Масштабироваться можно ввысь (вертикальное) или вширь (горизонтальное):
- Вертикальное — улучшить одну или несколько уже существующих нод за счёт дополнительных вычислительных мощностей. Но бесконечно так делать нельзя. Также система не отказоустойчива. 
- Горизонтальное — распределить вычисления по разным нодам. Такое масштабирование не имеет границ и более отказоустойчиво, но вводит накладность реализации распределённой системы и сложность синхронизации нод.

В горизонтальном масштабировании также учитывается географическое расположение узла — ближе быстрее 
### Доступность

Самая важная метрика для бизнеса. Хорошая доступность это низкий простой и соответственно больше возможностей для бизнеса работать. Исчисляется в девятках перцентилей.

![[Pasted image 20250916085959.png]]
Пять девяток — это золотой стандарт

Главным фактором доступности является redundancy — дублируются критические компоненты. Одна реплика выйдет из строя — её прикроет другая реплика.

Механики следующие:
- Active-Passive Failover —  реплики синхронизируются и дублируют основной сервер. Если основной сервер падает, реплики его прикрывают, вступая в работу
- Active-Active — работает сразу несколько серверов с балансировщиком нагрузки, за счёт чего в штатном режиме лучше масштабируемость, но больше накладность с синхронизацией. При выходе из строя одного сервера, его просто перестаёт перенаправлять балансировщик нагрузки