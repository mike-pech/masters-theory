Теорема CAP — система может гарантировать только два элемента из трёх:
- Consistency — данные последовательны и согласованы, или выдаёт ошибку, потому что что-то не так
- Availability — ответ всегда будет получен, не всегда самый правильный
- Partition-Tolerance — каждый из узлов может дать ответ сам по себе.

В реальных условиях Partition-Tolerance неизбежен — так как в архитектуре систем мы всё больше работаем с распределёнными вычислениями. Поэтому реальный выбор состоит между:
- Consistency — ответ не будет получен пока партиция не будет восстановлена. В этом случае такой подход нужен в банковских системах или интернет-магазинах
- Availability — в случае недоступности сетевого раздела система ответит, даже если данные устарели. Предпочтение на ответ актуальными данными, но если их подтянуть с других узлов нельзя, текущий узел лучше вернёт то, что у него есть. Применяется в соцсетях — самые свежие новости и точные счётчики лайков не нужны — нужно, чтобы пользователь всегда их видел
## PACELC-теорема

Теорема CAP описывает поведение во время сбоя. Расширение PACELC определяет работу в штатном режиме.

```
If (P)artition { (A)vailability } (E)lse { (C)onsistency }

(L)atency vs (C)onsistency
```

Если система разделена, то лучше предпочесть доступность. В обратном случае у нас есть доступность и так, так что можно обеспечить консистентность

Далее нужно выбрать консистентность или низкую задержку — отдавать ресурсы на синхронизацию или забить

![[Pasted image 20250916092416.png]]
Это не чёткое разделение, а спектр разных подходов, главные из которых подпадают под категории
#### ACID

Данные будут получены строго чётко к определённому моменту времени
#### BASE

Данные будут получены всегда, иногда самые актуальные, иногда нет

Но это спектр. Даже в BASE может быть важна Consistency — ответы на комментарии нужно отображать в правильном порядке